#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

// ----- Configuração da tela -----
#define SCREEN_W 128
#define SCREEN_H 60   // usamos só 60px de altura

Adafruit_SSD1306 display(SCREEN_W, 64, &Wire, -1);

// ----- Parâmetros dos olhos -----
#define OLHO_W 25
#define OLHO_H 30
#define PUPILA_R 4

// Centro vertical da tela
int centroY = SCREEN_H / 2;

// Desenha os olhos
void desenharOlhos(int offsetX, bool piscando) {
  display.clearDisplay();

  int olhoY = centroY - OLHO_H / 2;

  // ----- Olho esquerdo -----
  int olhoEsqX = 30 + offsetX;

  if (!piscando) {
    display.fillRoundRect(olhoEsqX, olhoY, OLHO_W, OLHO_H, 8, WHITE);
    display.fillCircle(
      olhoEsqX + OLHO_W / 2,
      olhoY + OLHO_H / 2,
      PUPILA_R,
      BLACK
    );
  } else {
    display.fillRect(olhoEsqX, centroY, OLHO_W, 3, WHITE);
  }

  // ----- Olho direito -----
  int olhoDirX = 75 + offsetX;

  if (!piscando) {
    display.fillRoundRect(olhoDirX, olhoY, OLHO_W, OLHO_H, 8, WHITE);
    display.fillCircle(
      olhoDirX + OLHO_W / 2,
      olhoY + OLHO_H / 2,
      PUPILA_R,
      BLACK
    );
  } else {
    display.fillRect(olhoDirX, centroY, OLHO_W, 3, WHITE);
  }

  display.display();
}

void setup() {
  Wire.begin(8, 9); // SDA, SCL (ESP32-C3 no Wokwi)
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);
  display.clearDisplay();
}

void loop() {
  desenharOlhos(-6, false); // olha esquerda
  delay(1200);

  desenharOlhos(0, true);  // pisca
  delay(120);

  desenharOlhos(6, false); // olha direita
  delay(1200);

  desenharOlhos(0, true);  // pisca
  delay(120);
}
